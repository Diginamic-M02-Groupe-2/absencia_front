<h1>
  Histogramme
</h1>

<div class="formContainer">
  <form [formGroup]="formGroup" [method]="formMethod" [action]="formAction" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <div class="form-field">
        <label for="period">Période</label>
        <p-calendar
          [formControlName]="'period'"
          view="month"
          dateFormat="mm/yy"
          appendTo="body"
          placeholder="Période"
          (onSelect)="onDateChanged($event)"
        ></p-calendar>
      </div>

      <div class="form-field">
        <label for="service">Département</label>
        <p-dropdown
          [formControlName]="'service'"
          appendTo="body"
          placeholder="Choisir un département"
          [options]="services"
          (onChange)="onSelectionChanged($event)"
        >
          <ng-template let-option pTemplate="item">
            {{ option.label }}
          </ng-template>
        </p-dropdown>
      </div>
    </div>
  </form>
</div>

<app-absence-request-histogram *ngIf="datasets" [month]="formGroup.get('period')?.value.getMonth()" [year]="formGroup.get('period')?.value.getFullYear()" [datasets]="datasets" />