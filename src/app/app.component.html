<p-sidebar #sidebarRef [(visible)]="sidebarVisible" class="drawer" [showCloseIcon]="false">
  <button class="drawer__close-button" (click)="closeBack($event)">
    <i class="pi pi-times"></i>
  </button>
  <ul class="drawer__list">
    <li class="drawer__list__item">
      <a
        [routerLink]="absenceRequestReadRoute"
        routerLinkActive="drawer__list__item__linkActive"
        class="drawer__list__item__link"
        (click)="closeBack($event)"
      >
        <i class="pi pi-home"></i>

        Demandes d'absence
      </a>
    </li>

    <li class="drawer__list__item">
      <a
        [routerLink]="employerWtrAndPublicHolidayReadRoute"
        routerLinkActive="drawer__list__item__linkActive"
        class="drawer__list__item__link"
        (click)="closeBack($event)"
      >
        <i class="pi pi-calendar-minus"></i>

        RTT employeur et jours fériés
      </a>
    </li>

    <li class="drawer__list__item">
      <a
        [routerLink]="planningReportRoute"
        routerLinkActive="drawer__list__item__linkActive"
        class="drawer__list__item__link"
        (click)="closeBack($event)"
      >
        <i class="pi pi-calendar"></i>

        Planning
      </a>
    </li>

    <li class="drawer__list__item" *ngxPermissionsOnly="['CAN_VISUALIZE_HISTOGRAM_ABSENCE_REQUEST']">
      <a
        [routerLink]="histogramReportRoute"
        routerLinkActive="drawer__list__item__linkActive"
        class="drawer__list__item__link"
        (click)="closeBack($event)"
      >
        <i class="pi pi-chart-bar"></i>

        Histogramme
      </a>
    </li>
  </ul>

  <app-form [formGroup]="logoutFormGroup" [method]="logoutFormMethod" [action]="logoutFormAction" (postSubmit)="postLogout($event); closeBack($event)">
    <button class="drawer__logOutLink">
      <i class="pi pi-sign-out drawer__logOutLink__icon"></i>

      Se déconnecter
    </button>
  </app-form>
</p-sidebar>

<header *ngIf="isLogged" class="header">
  <button class="header__toggleMenuButton" (click)="toggleSidebar(true)">
    <i class="pi pi-bars"></i>

    Absencia
  </button>

  <nav class="header__navBar">
    <ul class="header__navBar__list">
      <li class="header__navBar__list__item">
        <a [routerLink]="absenceRequestReadRoute" class="logoLink">
          Absencia
        </a>
      </li>

      <li class="header__navBar__list__item">
        <a [routerLink]="absenceRequestReadRoute" routerLinkActive="header__navBar__list__item__linkActive" class="header__navBar__list__item__link">
          <i class="pi pi-home"></i>

          Demandes d'absence
        </a>
      </li>

      <li class="header__navBar__list__item">
        <a [routerLink]="employerWtrAndPublicHolidayReadRoute" routerLinkActive="header__navBar__list__item__linkActive" class="header__navBar__list__item__link">
          <i class="pi pi-calendar-minus"></i>

          RTT employeur et jours fériés
        </a>
      </li>

      <li class="header__navBar__list__item">
        <a [routerLink]="planningReportRoute" routerLinkActive="header__navBar__list__item__linkActive" class="header__navBar__list__item__link">
          <i class="pi pi-calendar"></i>

          Planning
        </a>
      </li>

      <li class="header__navBar__list__item" *ngxPermissionsOnly="['CAN_VISUALIZE_HISTOGRAM_ABSENCE_REQUEST']">
        <a [routerLink]="histogramReportRoute" routerLinkActive="header__navBar__list__item__linkActive" class="header__navBar__list__item__link">
          <i class="pi pi-chart-bar"></i>

          Histogramme
        </a>
      </li>
    </ul>
  </nav>

  <app-form [formGroup]="logoutFormGroup" [method]="logoutFormMethod" [action]="logoutFormAction" (postSubmit)="postLogout($event)">
    <button class="header__logOutLink">
      <i class="pi pi-sign-out header__logOutLink__icon"></i>

      Se déconnecter
    </button>
  </app-form>
</header>

<main class="main">
  <div class="container">
    <router-outlet />
  </div>
</main>

<footer *ngIf="isLogged" class="footer">
  <div class="container">
    <p class="footer__copyright">
      &copy; 2024 Absencia. Tous droits réservés.
    </p>

    <p class="footer__authors">
      Projet final de la formation Diginamic CDA (2023-2024) réalisé par
      <a href="https://github.com/CedricBds">Cédric Baudais</a>,
      <a href="https://github.com/PamelaCalcei">Pamela Calcei</a>,
      <a href="https://github.com/Nerfez">Clément Olivier</a> et
      <a href="https://github.com/matteokeole" target="_blank">Mattéo Legagneux</a>.
    </p>
  </div>
</footer>

<app-toast />