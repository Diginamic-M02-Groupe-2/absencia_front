<ng-container *ngIf="!absenceRequests.length; else table">
  <div class="noResults">
    Aucun r√©sultat.
  </div>
</ng-container>

<ng-template #table>
  <p-table [value]="absenceRequests">
    <ng-template pTemplate="header">
      <tr>
        <th>
          Du
        </th>

        <th>
          Au
        </th>

        <th>
          Type
        </th>

        <th>
          Statut
        </th>

        <th>
          Motif
        </th>

        <th></th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-absenceRequest>
      <tr>
        <td>
          {{absenceRequest.startedAt|date: "dd/MM/yyyy"}}
        </td>

        <td>
          {{absenceRequest.endedAt|date: "dd/MM/yyyy"}}
        </td>

        <td>
          <app-badge>
            {{absenceRequest.type|absenceType}}
          </app-badge>
        </td>

        <td>
          <app-badge>
            {{absenceRequest.status|absenceRequestStatus}}
          </app-badge>
        </td>

        <td>
          {{absenceRequest.reason}}
        </td>

        <td>
          <div class="actions">
            <ng-container *ngIf="isStatusEditable(absenceRequest)">
              <button class="button updateButton" (click)="onClickUpdateButton(absenceRequest)" *ngxPermissionsOnly="['CAN_PATCH_ABSENCE_REQUEST']">
                <i class="pi pi-file-edit"></i>

                <span class="label">
                  Modifier
                </span>
              </button>
            </ng-container>

            <button class="button deleteButton" (click)="onClickDeleteButton(absenceRequest)" *ngxPermissionsOnly="['CAN_DELETE_ABSENCE_REQUEST']">
              <i class="pi pi-trash"></i>

              <span class="label">
                Supprimer
              </span>
            </button>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <app-absence-request-update-dialog
    [(visible)]="updateDialogVisible"
    [absenceRequest]="absenceRequest"
    [absenceTypeOptions]="absenceTypeOptions"
    (onUpdate)="onUpdate($event)"
  />

  <app-absence-request-delete-dialog [(visible)]="deleteDialogVisible" [absenceRequest]="absenceRequest" (onDelete)="onDelete($event)" />
</ng-template>